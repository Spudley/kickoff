<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="UTF-8">
    <title>Kickoff by frickelbruder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
</head>
<body>
<section class="page-header">
    <h1 class="project-name">Kickoff</h1>
    <h2 class="project-tagline">A continous website monitoring tool</h2>
    <a href="https://github.com/frickelbruder/kickoff/releases/latest" class="btn">Download .phar file</a>
    <a href="http://frickelbruder.github.io/kickoff/docu.html" class="btn">Documentation</a>
    <a href="https://github.com/frickelbruder/kickoff" class="btn">View on GitHub</a>
    <a href="https://github.com/frickelbruder/kickoff/zipball/master" class="btn">Download .zip</a>
    <a href="https://github.com/frickelbruder/kickoff/tarball/master" class="btn">Download .tar.gz</a>
</section>

<section class="main-content">
    <h3>
        <a id="custom-rules" class="anchor" href="#custom-rules" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Custom rules</h3>

    <p>Sometimes, it is just not enough to use a preset of rules and you wish to validate a page by your own complex rules.</p>
    <p>Kickoff provides an easy way to add custom rules. You just have to conform to a few simple requirements:</p>
    <ul>
        <li>Your class needs to implement the \Frickelbruder\KickOff\Rules\RuleInterface. Or better extend \Frickelbruder\KickOff\Rules\RuleBase, which implements already provides a basic implementation.</li>
        <li>Your class needs to be autoloaded via the composer autoloader.</li>
    </ul>
    <p>This is nearly all you need to know add your own Rules.</p>
    <h4>Implementing the validate() method</h4>
    <p>When implementing the validate() method, you receive an \Frickelbruder\KickOff\Http\HttpResponse\HttpResponse-Item, which you can inspect to make the necessary validation.</p>
    <p>When the Response does not meet your requirements, you should set an appropriate error message to the classes $errorMessage property and return false.</p>
    <p>The RuleBase class provides 2 handy functions to inspect the HTTP response:</p>
    <ul>
        <li>findHeader(), allows you to fetch a certain header from the HTTP response</li>
        <li>getResponseBodyAsXml(), retrieves the body as XML to access the response bodys DOM</li>
    </ul>
    <h4>Registering your rule</h4>
    <p>It's easy to add your rule to the config. Just add a "Rule"-section your config YAML file. As always: Learn from an example:</p>
    <pre><code>[...]
    config:
        [...]
    Section:
        website:
            rules:
                - MyCustomRule
        [...]
    Rules:
        MyCustomRule:
            class: \My\Custom\Namespace\MyCoolrule
            calls:
                - ['AnyCall', ["Any-value"]]

        HttpHeaderHasMyCustomValue:
            class: \Frickelbruder\KickOff\Rules\HttpHeaderHasValue
            calls:
                - ["setName", ["HttpHeaderHasMyCustomValue"]]
                - ["setHeaderToSearchFor", ["Custom-Header"]]
                - ["setValue", ["custom-value"]]
    [...]</code></pre>
    <p>As you can see, you add you rule under the Rules-section by providing a custom identifier for your rule. This identifier is used as reference in the section configs.<br>
    You then set the classname to your rules identifier. If required you can add some method calls to your class.</p>
    <p>You can also use one of the existing classes and maybe extend them by adding custom validation values. Just browse the source and see, which Rule might fit your needs.</p>
    <p>That's really all you need to know.</p>


    <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/frickelbruder/kickoff">Kickoff</a> is maintained by <a href="https://github.com/frickelbruder">frickelbruder</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
    </footer>

</section>

</body>
</html>
